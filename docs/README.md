# 순서도

- 1. 게임을 시작한다.
- 2. 컴퓨터가 수를 만든다.
- 3. 플레이어가 수를 입력한다.
- 4. 일치 여부를 확인한다.
- 5. 결과를 출력한다.
- 6-1. 정답이 아니면 3번 과정으로 돌아간다.
- 6-2. 정답이면 재시도 여부를 출력한다.
- 7-1. 재시도를 입력받으면 2번으로 돌아간다.
- 7-2. 종료를 입력받으면 게임을 종료한다.

# 🛠기능목록

## Feature 1 ✅

- `App`에서 `play`메서드를 이용해 게임을 시작한다.
- `ComputerNumber`에게 컴퓨터 수를 만들라고 메시지를 보낸다.
  - 컴퓨터 수는 1부터 9까지 서로 다른 수로 이루어진 3자리의 수이다.
- `ComputerNumber`는 컴퓨터 수를 `App`에게 전달한다.

## Feature 2 ✅

- `App`은 `InputView`에게 유저의 입력값을 입력받기를 메시지를 보낸다.
- `InputView`는 유저로부터 입력값을 입력받는다.
  - 입력값은 `Validator`의 `validateUserInput` 통해 유효성을 검사받는다.
    - 3개의 숫자를 입력받았는가?
    - 숫자만 입력받았는가?
    - 중복되지 않는 숫자를 입력받았는가?
- `InputView`는 입력값을 `App`에게 전달한다.

## Feature 3 ✅

- `App`은 유저의 입력값과 컴퓨터 수를 통해 일치 여부를 체크한다.

  - `matchComputerNumber`에게 유저 입력값을 전달한다.
  - `countMatchNumber`를 통해 컴퓨터 수와 유저 입력값의 매칭을 계산한다.
  - 유저 입력값을 순회하며 컴퓨터 수의 요소와 일치하는 값이 있는지 확인한다.

    - 일치하는 값이 있다면 해당 요소의 인덱스와 일치하는 컴퓨터 요소의 인덱스를 확인한다.
    - 인덱스가 같다면 같은 수이면서 같은 자리에 있는 것이므로 `스트라이크 처리`를한다.
    - 인덱스가 다르면 같은 자리에 있는 것은 아니므로 `볼 처리`를 한다.
    - 같은 수가 전혀 없으면 `낫싱 처리`를 한다.

- 처리된 매칭 테이블을 리턴한다.

## Feature 4 ✅

- `App`은 매칭 테이블을 `OutputView`에게 전달해 결과를 출력하라고 메시지를 보낸다.
- `OutputView`는 결과를 출력한다.

## Feature 5 ✅

- `checkCorrect`를 통해 정답여부를 확인한다.

  - 정답이 아니면 그대로 `play`를 진행한다.
  - 정답을 맞추었다면 `InputView`에게 재시도 여부를 입력받으라고 메시지를 보낸다.
    - 1을 입력받으면 다시 게임을 재시작한다.
    - 2을 입력받으면 그대로 게임을 종료한다.
    - 1,2가 아닌 다른 값을 받으면 예외처리를 한다. 예외처리는 `Validator`의 `validateRetryAnswer`에서 진행한다.

<br/>

# 객체 정리

## App

- 게임을 시작한다.
- 컴퓨터 수와 사용자의 입력값을 비교한다.
- 재시도를 판단하여 게임을 재시도하거나 종료한다.

## ComputerNumber

- 컴퓨터 수를 만든다.

## InputView

- 유저의 입력값을 받는다.
- 재시도 여부를 받는다.

## OutputView

- 시작 문구를 출력한다.
- 게임 결과를 출력한다.
- 종료 문구를 출력한다.

## Validator

- 유저 입력값의 유효성을 검사한다.
- 재시도 입력값의 유효성을 검사한다.

# 🤔리팩토링

- Airbnb 자바스크립트 스타일 가이드를 준수한다.
- 테스트 통과를 위해서 play메서드를 유지한 채, 입력값을 다시 받아야한다.
  - 재시도를 한다면 play메서드를 재호출하는 것이 아니라 반복문 안에서 게임을 진행한다.
- play 메서드 리팩토링
  - 메서드 길이를 줄인다.
  - 유저의 입력값을 받고 Number타입 요소로 변환하는 과정을 getUserInput메서드에서 진행한다.
- 처음 시작할 때 컴퓨터 수를 받아오고 게임의 상태를 지정하는 메서드를 추가한다.
- 하드코딩하지 않고 상수를 활용한다.
  - `Constants`를 이용한다.
- 출력 문구를 추가한다.
  - 시작할 때 출력문구
  - 종료할 때 출력문구
- 유저 입력값의 에러 케이스를 추가한다.
  - 숫자만 입력받았는가?
  - 중복되지 않는 숫자를 입력받았는가?
- 템플릿 만드는 기능을 유틸함수로 따로 분리한다.
